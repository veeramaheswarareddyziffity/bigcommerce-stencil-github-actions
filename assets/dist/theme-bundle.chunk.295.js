"use strict";(self.webpackChunkbigcommerce_cornerstone=self.webpackChunkbigcommerce_cornerstone||[]).push([[295],{67722:function(t,e,r){function n(t){return"string"==typeof t&&0!==t.length}r.d(e,{A:function(){return n}})},71779:function(t,e,r){r.d(e,{i:function(){return a}});var n="translations",i=function(t){return!!Object.keys(t[n]).length},a=function(t){var e=function(){for(var t=0;t<arguments.length;t++){var e=JSON.parse(t<0||arguments.length<=t?void 0:arguments[t]);if(i(e))return e}}(t.validationDictionaryJSON,t.validationFallbackDictionaryJSON,t.validationDefaultDictionaryJSON),r=Object.values(e[n]);return Object.keys(e[n]).map(function(t){return t.split(".").pop()}).reduce(function(t,e,n){return t[e]=r[n],t},{})}},96295:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var n=r(91238),i=r(41582),a=r(67722),o=r(61579),c=r(71779),f=r(96609),u=r(4621),l=r(87838),m=r(33270);function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var p=function(t){function e(e){var r;(r=t.call(this,e)||this).validationDictionary=(0,c.i)(e);var n=m("#gift-certificate-balance"),a=m("#gift-certificate-form"),d=a.find('input[name="certificate_amount"]'),p=(0,i.A)({submit:'#gift-certificate-form input[type="submit"]',delay:300,tap:f.dN});if(d.length){var s=a.find('input[name="certificate_amount"]'),g=s.data("min"),v=s.data("minFormatted"),h=s.data("max"),y=s.data("maxFormatted");p.add({selector:'#gift-certificate-form input[name="certificate_amount"]',validate:function(t,e){var r=Number(e);r||t(!1),t(r>=g&&r<=h)},errorMessage:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=t;return["[MIN]","[MAX]"].forEach(function(t,e){i=i.includes(t)?i.replace(t,r[e]):i}),i}(r.validationDictionary.certificate_amount_range,v,y)})}if(p.add([{selector:'#gift-certificate-form input[name="to_name"]',validate:function(t,e){t(function(t){return t.length}(e))},errorMessage:r.context.toName},{selector:'#gift-certificate-form input[name="to_email"]',validate:function(t,e){t(function(){return o.A.email.apply(o.A,arguments)}(e))},errorMessage:r.context.toEmail},{selector:'#gift-certificate-form input[name="from_name"]',validate:function(t,e){t(function(t){return t.length}(e))},errorMessage:r.context.fromName},{selector:'#gift-certificate-form input[name="from_email"]',validate:function(t,e){t(function(){return o.A.email.apply(o.A,arguments)}(e))},errorMessage:r.context.fromEmail},{selector:'#gift-certificate-form input[name="certificate_theme"]:first-of-type',triggeredBy:'#gift-certificate-form input[name="certificate_theme"]',validate:function(t){t("string"==typeof a.find('input[name="certificate_theme"]:checked').val())},errorMessage:r.context.certTheme},{selector:'#gift-certificate-form input[name="agree"]',validate:function(t){t(a.find('input[name="agree"]').get(0).checked)},errorMessage:r.context.agreeToTerms},{selector:'#gift-certificate-form input[name="agree2"]',validate:function(t){t(a.find('input[name="agree2"]').get(0).checked)},errorMessage:r.context.agreeToTerms}]),n.length){var b=r.checkCertBalanceValidator(n);n.on("submit",function(){if(b.performCheck(),!b.areAll("valid"))return!1})}return a.on("submit",function(t){if(p.performCheck(),!p.areAll("valid"))return t.preventDefault()}),m("#gift-certificate-preview").on("click",function(t){if(t.preventDefault(),p.performCheck(),p.areAll("valid")){var e=(0,l.PM)(),n=m(t.currentTarget).data("previewUrl")+"&"+a.serialize();e.open(),u.FH.getPage(n,{},function(t,n){if(t)return e.updateContent(r.context.previewError);e.updateContent(),function(t,e){var r=m("<iframe />").width("100%").attr("frameBorder","0").appendTo(t)[0],n=r.contentWindow?r.contentWindow.document:r.contentDocument;n.open(),n.write(e),n.close();var i=Math.max(m(window).height()-300,300);m(n).ready(function(){var t=Math.min(n.body.scrollHeight+20,i);m(r).height(t)})}(m("#modal-content"),n)})}}),r}var r,n;return n=t,(r=e).prototype=Object.create(n.prototype),r.prototype.constructor=r,d(r,n),e.prototype.checkCertBalanceValidator=function(t){var e=(0,i.A)({submit:t.find('input[type="submit"]'),tap:f.dN});return e.add({selector:t.find('input[name="giftcertificatecode"]'),validate:function(t,e){t((0,a.A)(e))},errorMessage:this.validationDictionary.invalid_gift_certificate}),e},e}(n.A)}}]);
//# sourceMappingURL=theme-bundle.chunk.295.js.map
